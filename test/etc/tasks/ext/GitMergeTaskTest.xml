<?xml version="1.0"?>
<project name="gitMergeTest" default="invalid">

    <property name="tmp.dir" value="./../../../tmp/git" />
    <resolvepath propertyName="tmp.dir.resolved" file="${tmp.dir}" />

    <target name="invalid">
        <fail>This file should only be run via a testcase</fail>
    </target>

    <target name="allParamsSet" description="all parameters present">
        <gitclone 
            repository="git://github.com/farazdagi/phing-tests.git"
            targetPath="${tmp.dir.resolved}" />
        <!-- create couple of test branches -->
        <gitbranch
            repository="${tmp.dir.resolved}" 
            branchname="merge-test-1" startpoint="origin/master" />
        <gitbranch
            repository="${tmp.dir.resolved}" 
            branchname="merge-test-2" startpoint="origin/master" />
        <gitmerge
            repository="${tmp.dir.resolved}" 
            remote="merge-test-1 merge-test-2" />
    </target>

    <target name="noRepository" description="Required param checking">
        <gitmerge />
    </target>

    <target name="noRemotes" description="Required param checking">
        <gitmerge repository="${tmp.dir.resolved}" remote="" />
    </target>

    <target name="refspecSet" description="git-merge --track">
        <gitclone 
            repository="git://github.com/farazdagi/phing-tests.git"
            targetPath="${tmp.dir.resolved}" />
        <gitmerge 
            repository="${tmp.dir.resolved}" 
            destination="origin"
            refspec="master:refspec-branch" 
            quiet="true" />
        <gitbranch
            repository="${tmp.dir.resolved}" 
            branchname="refspec-branch" 
            delete="true" />
    </target>

</project>
